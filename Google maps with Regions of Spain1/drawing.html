<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
    <!--<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>-->
    <!--<script type="text/javascript" src="https://www.google.com/jsapi"></script>-->
    <!--<script type="text/javascript">-->
        <!--google.load('visualization', '1', {'packages': ['map']});-->
        <!--google.setOnLoadCallback(initMap());-->
        <!--function drawRegionsMap() {-->
            <!--var data = new google.visualization.DataTable();-->
            <!--data.addColumn('string', 'Country');-->
            <!--data.addColumn('number', 'Anual');-->
            <!--data.addRows([-->
                <!--['',      {v:-6, f:'-6%'}],-->
                <!--[{f: 'Islas Baleares', v: 'ES-IB'},     {v:4.2, f:'4.2%'}  ],-->
                <!--[{f: 'Madrid', v: 'ES-MD'},             {v:4.3, f:'4.3%'}   ],-->
                <!--[{f: 'Navarra',v: 'ES-NC'},             {v:1.8, f:'1.8%'},  ],-->
                <!--[{f: 'La Rioja', v: 'ES-RI'},           {v:-5.1, f:'-5.1%'},  ],-->
                <!--[{f: 'Asturias', v: 'ES-AS'},           {v:1.5, f:'1.5%'},    ],-->
                <!--[{f: 'Cantabria',v: 'ES-CB'},           {v:-1.8, f:'-1.8%'},  ],-->
                <!--[{f: 'Ceuta', v: 'ES-CE'},              {v:-1.0, f:'-1.0%'},   ],-->
                <!--[{f: 'Melilla', v: 'ES-ML'},            {v:1.7, f:'1.7%'},    ],-->
                <!--[{f: 'Canarias', v: 'ES-CN'},           {v:2.6, f:'2.6%'},  ],-->
                <!--[{f: 'Andalucía', v: 'ES-AN'},          {v:-0.5, f:'-0.5%'},   ],-->
                <!--[{f: 'Aragón', v: 'ES-AR'},             {v:-1.5, f:'-1.5%'},   ],-->
                <!--[{f: 'Castilla-La Mancha',v: 'ES-CM'},  {v:-1.0, f:'-1.0%'},  ],-->
                <!--[{f: 'Castilla y León', v: 'ES-CL'},    {v:-1.4, f:'-1.4%'},   ],-->
                <!--[{f: 'Cataluña', v: 'ES-CT'},           {v:4.8, f:'4.8%'},     ],-->
                <!--[{f: 'Extremadura',v: 'ES-EX'},         {v:-0.8, f:'-0.8%'},  ],-->
                <!--[{f: 'Galicia', v: 'ES-GA'},            {v:0.5, f:'0.5%'},    ],-->
                <!--[{f: 'Murcia', v: 'ES-MC'},             {v:-0.4, f:'-0.4%'},   ],-->
                <!--[{f: 'País Vasco',v: 'ES-PV'},          {v:-1.8, f:'-1.8%'},   ],-->
                <!--[{f: 'Valencia', v: 'ES-VC'},           {v:1.9, f:'1.9%'},    ],-->
                <!--['',      {v:6, f:'6%'}],-->
            <!--]);-->

            <!--var options = {-->
                <!--'title': 'Map',-->
                <!--colorAxis: {colors: ['#ff0000','#ffffff', '#00ff00']},-->
                <!--'width': 700, 'height': 600, 'region': 'ES', 'resolution': 'provinces',-->
            <!--};-->

            <!--var container = document.getElementById('map_canvas');-->
            <!--var geomap = new google.visualization.GeoChart(container);-->
            <!--geomap.draw(data, options);-->
        <!--};-->
		<!---->

<!--function initMap() {-->
  <!--var map = new google.maps.Map(document.getElementById('map_canvas'), {-->
    <!--center: {lat: -34.397, lng: 150.644},-->
    <!--zoom: 8-->
  <!--});-->

  <!--var drawingManager = new google.maps.drawing.DrawingManager({-->
    <!--drawingMode: google.maps.drawing.OverlayType.MARKER,-->
    <!--drawingControl: true,-->
    <!--drawingControlOptions: {-->
      <!--position: google.maps.ControlPosition.TOP_CENTER,-->
      <!--drawingModes: ['marker', 'circle', 'polygon', 'polyline', 'rectangle']-->
    <!--},-->
    <!--markerOptions: {icon: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png'},-->
    <!--circleOptions: {-->
      <!--fillColor: '#ffff00',-->
      <!--fillOpacity: 1,-->
      <!--strokeWeight: 5,-->
      <!--clickable: false,-->
      <!--editable: true,-->
      <!--zIndex: 1-->
    <!--}-->
  <!--});-->
  <!--drawingManager.setOptions({-->
  <!--drawingControlOptions: {-->
    <!--position: google.maps.ControlPosition.BOTTOM_LEFT,-->
          <!--drawingModes: ['marker', 'circle', 'polygon', 'polyline', 'rectangle']-->
  <!--}-->
<!--});-->
  <!--drawingManager.setMap(map);-->
  <!--google.maps.event.addListener(drawingManager, 'circlecomplete', function(circle) {-->
  <!--var radius = circle.getRadius();-->
<!--});-->


    <!--</script>-->
<!--</head>-->
<!--<body>-->
<!--<div id='map_canvas'></div>-->
<!--</body>-->

<!--</html>-->

<!DOCTYPE html>
<html>
<head>
    <title>Drawing tools</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
        /* Always set the map height explicitly to define the size of the div
         * element that contains the map. */
        #map {
            height: 100%;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
<div id="map"></div>
<script>
    // This example requires the Drawing library. Include the libraries=drawing
    // parameter when you first load the API. For example:
    // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=drawing">

    function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: -34.397, lng: 150.644},
            zoom: 8
        });

        var drawingManager = new google.maps.drawing.DrawingManager({
            drawingMode: google.maps.drawing.OverlayType.MARKER,
            drawingControl: true,
            drawingControlOptions: {
                position: google.maps.ControlPosition.TOP_CENTER,
                drawingModes: ['marker', 'circle', 'polygon', 'polyline', 'rectangle']
            },
            markerOptions: {icon: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png'},
            circleOptions: {
                fillColor: '#ffff00',
                fillOpacity: 1,
                strokeWeight: 5,
                clickable: false,
                editable: true,
                zIndex: 1
            }
        });
        drawingManager.setMap(map);
        var map;
        var rectangle = null;
        google.maps.event.addListener(drawingManager, 'overlaycomplete', function(event) {
            if (event.type == google.maps.drawing.OverlayType.RECTANGLE) {
                if (rectangle != null)
                    rectangle.setMap(null);
                rectangle = event.overlay;
                var bounds = rectangle.getBounds();
                console.log(bounds);
                drawingManager.setDrawingMode(null);
            }
        });

        google.maps.event.addListener(drawingManager, "drawingmode_changed", function() {
            if ((drawingManager.getDrawingMode() == google.maps.drawing.OverlayType.RECTANGLE) &&
                (rectangle != null))
                rectangle.setMap(null);
        });

        // when the user clicks somewhere else on the map.
        google.maps.event.addListener(map, 'click', function() {
            if (rectangle != null)
                rectangle.setMap(null);
        });
//        google.maps.event.addListener(drawingManager, 'polygoncomplete', function (polygon) {
//            var coordinates = (polygon.getPath().getArray());
//            console.log(coordinates);
//        })
        google.maps.event.addListener(drawingManager, 'overlaycomplete', function(polygon) {
            $.each(polygon.overlay.latLngs.b[0].b, function(key, latlng){
                var lat = latlng.d;
                var lon = latlng.e;
                console.log(lat, lon); //do something with the coordinates
            });
        });
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBOl57Bc7ztZxlwRRA1ljkdzBgdkfekL9w&libraries=drawing&callback=initMap"
        async defer></script>
</body>
</html>